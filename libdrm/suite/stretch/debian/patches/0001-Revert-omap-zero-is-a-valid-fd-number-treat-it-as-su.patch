From c7566400dbefcebb288795d1eb4cbc37f3ddd81e Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 25 Aug 2015 09:35:22 -0500
Subject: [PATCH] Revert "omap: zero is a valid fd number, treat it as such"

This reverts commit c86dabfc9f046e835ddbd01d28c45f9cf7c1f368.

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 omap/omap_drm.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/omap/omap_drm.c b/omap/omap_drm.c
index 4a0248d..ff83a93 100644
--- a/omap/omap_drm.c
+++ b/omap/omap_drm.c
@@ -363,7 +363,7 @@ void omap_bo_del(struct omap_bo *bo)
 		munmap(bo->map, bo->size);
 	}
 
-	if (bo->fd >= 0) {
+	if (bo->fd) {
 		close(bo->fd);
 	}
 
@@ -414,7 +414,7 @@ uint32_t omap_bo_handle(struct omap_bo *bo)
  */
 int omap_bo_dmabuf(struct omap_bo *bo)
 {
-	if (bo->fd < 0) {
+	if (!bo->fd) {
 		struct drm_prime_handle req = {
 				.handle = bo->handle,
 				.flags = DRM_CLOEXEC,
-- 
2.5.0

