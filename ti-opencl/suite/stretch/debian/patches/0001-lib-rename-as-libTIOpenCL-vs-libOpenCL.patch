From 9e210f4d01ac1e8de9edf1d9061876854e4dbe64 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Thu, 16 Aug 2018 16:40:28 -0500
Subject: [PATCH] lib: rename as libTIOpenCL vs libOpenCL

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 examples/dgemm/Makefile               |  2 +-
 examples/make.inc                     |  2 +-
 host/src/CMakeLists.txt               | 32 +++++++++++++--------------
 8 files changed, 26 insertions(+), 26 deletions(-)

diff --git a/examples/dgemm/Makefile b/examples/dgemm/Makefile
index 665a033..34c6511 100644
--- a/examples/dgemm/Makefile
+++ b/examples/dgemm/Makefile
@@ -1,6 +1,6 @@
 EXE        = dgemm
 CXXFLAGS  = -O3 
-BOTHCBLAS  = -Llibcblas_atlas_arm -lcblas -latlas -Llibcblas_dgemm_dsp -lcblas_dgemm_dsp -lOpenCL -locl_util -lpthread
+BOTHCBLAS  = -Llibcblas_atlas_arm -lcblas -latlas -Llibcblas_dgemm_dsp -lcblas_dgemm_dsp -lTIOpenCL -locl_util -lpthread
 
 include ../make.inc
 
diff --git a/examples/make.inc b/examples/make.inc
index 698d5c6..2c8226c 100644
--- a/examples/make.inc
+++ b/examples/make.inc
@@ -232,7 +232,7 @@ DSP_INCLUDE += -I$(TARGET_ROOTDIR)/usr/share/ti/cgt-c6x/include
 
 CL6X += -mv6600 --abi=eabi $(DSP_INCLUDE)
 
-LIBS  = -lOpenCL -locl_util
+LIBS  = -lTIOpenCL -locl_util
 
 %.o: %.cpp
 	@echo Compiling $<
diff --git a/host/src/CMakeLists.txt b/host/src/CMakeLists.txt
index 3ad7245..e99bbb4 100644
--- a/host/src/CMakeLists.txt
+++ b/host/src/CMakeLists.txt
@@ -211,9 +211,9 @@ add_subdirectory(runtime)
 
 set(CMAKE_SHARED_LINKER_FLAGS "-Wl,-Bsymbolic")
 if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
-add_library(OpenCL SHARED ${COAL_SRC_FILES})
+add_library(TIOpenCL SHARED ${COAL_SRC_FILES})
 else()
-add_library(OpenCL STATIC ${COAL_SRC_FILES})
+add_library(TIOpenCL STATIC ${COAL_SRC_FILES})
 endif()
 
 if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
@@ -230,20 +230,20 @@ set_source_files_properties(${CMAKE_CURRENT_BINARY_DIR}/runtime/stdlib_impl.h
 set_source_files_properties(${CMAKE_CURRENT_BINARY_DIR}/runtime/stdlib_def.h
                             PROPERTIES GENERATED 1)
 
-add_dependencies(OpenCL generate_stdlib_c)
-add_dependencies(OpenCL generate_builtins)
+add_dependencies(TIOpenCL generate_stdlib_c)
+add_dependencies(TIOpenCL generate_builtins)
 endif()
 
-add_dependencies(OpenCL oclload)
+add_dependencies(TIOpenCL oclload)
 if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
-add_dependencies(OpenCL generate_dsp_builtins)
+add_dependencies(TIOpenCL generate_dsp_builtins)
 endif()
 
 add_subdirectory(core/dsp/tal/ocl_load)
 
 SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)
 
-SET_TARGET_PROPERTIES(OpenCL PROPERTIES
+SET_TARGET_PROPERTIES(TIOpenCL PROPERTIES
   VERSION ${${PROJECT_NAME}_VERSION}
   SOVERSION ${${PROJECT_NAME}_SOVERSION}
 )
@@ -252,14 +252,14 @@ if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
 set_source_files_properties(${COAL_SRC_FILES}
         PROPERTIES COMPILE_FLAGS ${LLVM_COMPILE_FLAGS})
 
-set_target_properties(OpenCL PROPERTIES
+set_target_properties(TIOpenCL PROPERTIES
   LINK_FLAGS "${LLVM_LDFLAGS}"
   LINK_INTERFACE_LIBRARIES "")
 endif()
 
 # Dirty platform.cpp to cause re-compile with every build. It contains
 # a compile-time timestamp used as the library build timestamp.
-add_custom_command (TARGET OpenCL PRE_BUILD 
+add_custom_command (TARGET TIOpenCL PRE_BUILD
                  COMMAND touch -c ${CMAKE_CURRENT_SOURCE_DIR}/core/platform.cpp)
 
 if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
@@ -321,22 +321,22 @@ if(ENABLE_ULM)
   LIST (APPEND LIBS ${ULM_LIB} )
 endif()
 
-TARGET_LINK_LIBRARIES(OpenCL ${LIBS})
+TARGET_LINK_LIBRARIES(TIOpenCL ${LIBS})
 endif()  # if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
 
 if (NOT (${BUILD_OS} MATCHES "SYS_BIOS"))
-  install(TARGETS OpenCL LIBRARY DESTINATION /usr/lib ${OCL_FPERMS})
+  install(TARGETS TIOpenCL LIBRARY DESTINATION /usr/lib ${OCL_FPERMS})
 else()
-  file(WRITE ${PROJECT_BINARY_DIR}/lib/OpenCLAddLib.mri
-    "OPEN ../lib/libOpenCL.a
+  file(WRITE ${PROJECT_BINARY_DIR}/lib/TIOpenCLAddLib.mri
+    "OPEN ../lib/libTIOpenCL.a
     ADDLIB ${ARM_LLVM_DIR}/lib/libLLVMBitReader.a
     ADDLIB ${ARM_LLVM_DIR}/lib/libLLVMCore.a
     ADDLIB ${ARM_LLVM_DIR}/lib/libLLVMSupport.a
     ADDLIB ../lib/liboclload.a
     SAVE
     END")
-  add_custom_command (TARGET OpenCL POST_BUILD
-    COMMAND ${CMAKE_AR} -M < ${PROJECT_BINARY_DIR}/lib/OpenCLAddLib.mri)
-  install(TARGETS OpenCL ARCHIVE DESTINATION /usr/lib ${OCL_FPERMS})
+  add_custom_command (TARGET TIOpenCL POST_BUILD
+    COMMAND ${CMAKE_AR} -M < ${PROJECT_BINARY_DIR}/lib/TIOpenCLAddLib.mri)
+  install(TARGETS TIOpenCL ARCHIVE DESTINATION /usr/lib ${OCL_FPERMS})
 endif()
 
-- 
2.18.0

